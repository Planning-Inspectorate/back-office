{%- extends "app/layouts/app-two-column.layout.njk" -%}

{%- from "govuk/components/notification-banner/macro.njk" import govukNotificationBanner -%}
{%- from "govuk/components/summary-list/macro.njk" import govukSummaryList -%}
{%- from "govuk/components/table/macro.njk" import govukTable -%}
{%- from "govuk/components/accordion/macro.njk" import govukAccordion -%}
{%- from "govuk/components/inset-text/macro.njk" import govukInsetText -%}
{%- from "../components/status-tag.njk" import statusTag -%}
{%- from "../components/appeal-details-summary.njk" import appealDetailsSummary %}

{%- set containerSize = "xl" -%}
{%- set pageTitle = "Appeal details - GOV.UK" -%}

{% set backLinkUrl = '/appeals-service/appeals-list' %}
{% set backLinkText = 'Back to National list' %}

{%- set caseOverviewHtml -%}
	{{ govukSummaryList(summaryLists.caseOverview) }}
{%- endset -%}

{%- set siteDetailsHtml -%}
	{{ govukSummaryList(summaryLists.siteDetails) }}
{%- endset -%}

{%- set caseTimetableHtml -%}
	{%- if summaryLists.caseTimetable -%}
		{{ govukSummaryList(summaryLists.caseTimetable) }}
	{%- else -%}
		{%- set caseTimetableInsetHtml -%}
			<p>Case not started</p>
			<a href="{{ urls.appellantCase }}" class="govuk-link">Review appeal</a>
		{%- endset -%}
		{{ govukInsetText({
			html: caseTimetableInsetHtml,
			classes: "govuk-!-margin-top-0"
		}) }}
	{%- endif -%}
{%- endset -%}

{%- set caseDocumentationHtml -%}
	{{ govukTable(tables.caseDocumentation) }}
{%- endset -%}

{%- set caseTeamHtml -%}
	{{ govukSummaryList(summaryLists.caseTeam) }}
{%- endset -%}

{%- block pageHeading -%}
	{%- for notificationBanner in notificationBanners -%}
		{{ govukNotificationBanner(notificationBanner) }}
	{%- endfor -%}
	<div class="govuk-grid-row">
		<div class="govuk-grid-column-full">
			<span class="govuk-caption-l govuk-!-margin-bottom-3">Appeal {{appeal.shortReference}}</span>
			<h1 class="govuk-heading-xl govuk-!-margin-bottom-3">Case details</h1>
		</div>
	</div>
{%- endblock -%}

{%- block pageContent -%}
	{{ statusTag(appeal.status, 'govuk-!-margin-bottom-4') }}
	{{ appealDetailsSummary(appealDetailsSummaryParameters) }}
	{{
		govukAccordion({
			id: "accordion-default-" + appeal.id,
			items: [{
				heading: {
					text: "Case overview"
				},
				content: {
					html: caseOverviewHtml
				}
			},{
				heading: {
					text: "Site details"
				},
				content: {
					html: siteDetailsHtml
				}
			}, {
				heading: {
					text: "Case timetable"
				},
				content: {
					html: caseTimetableHtml
				}
			}, {
				heading: {
					text: "Case documentation"
				},
				content: {
					html: caseDocumentationHtml
				}
			}, {
				heading: {
					text: "Case team"
				},
				content: {
					html: caseTeamHtml
				}
			}]
		})
	}}
{%- endblock -%}
