{% extends "layouts/form.njk" %}

{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}
{% from "govuk/components/warning-text/macro.njk" import govukWarningText %}
{% from "components/address.njk" import address %}
{% from "components/button-group.njk" import buttonGroup %}

{% block pageTitle %}
    Check and confirm - Appeal a householder planning decision - GOV.UK
{% endblock %}

{% set reviewOutcomeSection = {
    key: { text: 'Review outcome' },
    value: { text: reviewOutcome }
} %}

{% set documentsSection = {
    key: { text: 'Missing or incorrect documents' },
    value: { html: 'lol' }
} %}

{% set appealReferenceSection = {
    key: { text: 'Appeal reference' },
    value: { text: questionnaireData.caseReference }
} %}

{% set addressSection = {
    key: { text: 'Appeal site' },
    value: { html: address({
        addressLine1: questionnaireData.siteAddressLineOne,
        addressLine2: questionnaireData.siteAddressLineTwo,
        town: questionnaireData.siteAddressTown,
        county: questionnaireData.siteAddressCounty,
        postcode: questionnaireData.siteAddressPostCode
    }) }
} %}

{% set lpaSection = {
    key: { text: 'Local planning department' },
    value: { text: questionnaireData.localPlanningAuthorityName }
} %}

{% if reviewOutcome === '2' %}
  {% set sections = [reviewOutcomeSection, documentsSection, appealReferenceSection, addressSection, lpaSection] %}
{% else %}
  {% set sections = [reviewOutcomeSection, appealReferenceSection, addressSection, lpaSection] %}
{% endif %}

{% block formContent %}
    <h2 class="govuk-heading-l">Check and confirm</h2>
    {{ govukSummaryList({ rows: sections }) }}
    {% if reviewOutcome === '3' %}
        {{ govukWarningText({
            text: "Confirming the questionnaire as complete makes the appeal available to inspectors.",
            iconFallbackText: "Warning"
        }) }}
    {% endif %}
    {{ buttonGroup(previousPage, "Go back to review questionnaire", "Confirm outcome") }}
{% endblock %}
