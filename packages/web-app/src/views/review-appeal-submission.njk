{% extends "layouts/form.njk" %}

{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}
{% from "govuk/components/radios/macro.njk" import govukRadios %}
{% from "components/address.njk" import address %}
{% from "components/document-list-link.njk" import documentListLink %}
{% from "components/button.njk" import button %}
{% from "components/document-link.njk" import documentLink %}

{% block formContent %}
  {{ govukSummaryList({
    rows: [
      {
        key: { text: "Appellant name" },
        value: { text: appealData.appellantName if appealData.creatorOriginalApplicant else appealData.creatorName }
      },
      { key: { text: "Appeal reference" },
        value: { text: appealData.caseReference }
      },
      {
        key: { text: "Received on" },
        value: { text: appealData.submissionDate | date }
      },
      {
        key: { text: "Appeal site" },
        value: { html: address({
          addressLine1: appealData.siteAddressLineOne,
          addressLine2: appealData.siteAddressLineTwo,
          town: appealData.siteAddressTown,
          county: appealData.siteAddressCounty,
          postcode: appealData.siteAddressPostCode
        }) }
      },
      {
        key: { text: "Local planning department" },
        value: { text: appealData.localPlanningAuthorityName }
      },
      {
        key: { text: "Planning application reference" },
        value: { text: appealData.caseReference }
      }
    ]
  }) }}

  <h2 class="govuk-heading-l govuk-!-margin-top-9">Planning application documents</h2>

  {{ govukSummaryList({
    rows: [
      {
        key: { text: "Planning application form" },
        value: { html: documentLink(appealData.appealId, appealData.originalApplication) }
      },
      {
        key: { text: "Decision letter" },
        value: { html: documentLink(appealData.appealId, appealData.decisionLetter) }
      }
    ]
  }) }}

  <h2 class="govuk-heading-l govuk-!-margin-top-9">Appeal documents</h2>

  {{ govukSummaryList({
    rows: [
      {
        key: { text: "Appeal statement" },
        value: { html: documentLink(appealData.appealId, appealData.appealStatement) }
      },
      {
        key: { text: "Supporting documents" },
        value: { html: documentListLink(appealData.appealId, appealData.otherDocuments) }
      }
    ]
  }) }}

  {{ govukRadios({
    idPrefix: "review-outcome",
    name: "review-outcome",
    errorMessage: errors['review-outcome'] and { text: errors['review-outcome'].msg },
    fieldset: {
      legend: {
        text: "Outcome of review",
        isPageHeading: false,
        classes: "govuk-fieldset__legend--l govuk-!-margin-top-6"
      }
    },
    items: [
      { value: '1', text: "Valid", checked: reviewOutcome === '1' },
      { value: '2', text: "Invalid", checked: reviewOutcome === '2' },
      { divider: "or" },
      { value: '3', text: "Something is missing or wrong", checked: reviewOutcome === '3' }
    ]
  }) }}

  {{ button() }}
{% endblock %}
