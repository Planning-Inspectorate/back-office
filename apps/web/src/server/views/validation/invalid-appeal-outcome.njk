{% extends "validation/_layout-validation.njk" %}

{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% block beforeContent %}
	{{ govukBackLink({ text: "Back", href: backURL }) }}
{% endblock %}

{% block pageContent %}
	{{ super() }}

	<h1 class="govuk-heading-xl">
		Invalid appeal details
	</h1>

	<p class="govuk-body">
		Appeal reference: {{ appealData.AppealReference }}
	</p>

	<form action="" method="post" novalidate>
		{{
			govukCheckboxes({
				idPrefix: 'invalidReasons',
				name: 'invalidReasons',
				errorMessage: errors['invalidReasons'] and { text: errors['invalidReasons'].msg },
				items: [
					{ value: 'OutOfTime', text: 'Out of time', checked: invalidReasons['OutOfTime'] },
					{ value: 'NoRightOfappeal', text: 'No right of appeal', checked: invalidReasons['NoRightOfappeal'] },
					{ value: 'NotAppealable', text: 'Not appealable', checked: invalidReasons['NotAppealable'] },
					{ value: 'LPADeemedInvalid', text: 'LPA deemed application as invalid', checked: invalidReasons['LPADeemedInvalid'] },
					{
						value: 'OtherReason',
						text: 'Other',
						checked: invalidReasons['OtherReason'],
						conditional: {
							html: govukInput({
								type: 'text',
								id: 'OtherReasons',
								name: 'OtherReasons',
								label: { text: 'List reasons' },
								hint: { text: 'This will be sent to the appellant and LPA' },
								errorMessage: errors['OtherReasons'] and { text: errors['OtherReasons'].msg },
								spellcheck: true,
								value: OtherReasons
							})
						}
					}
				]
			})
		}}

		<div class="govuk-button-group">
			{{ govukButton({ text: text | default('Continue') }) }}
			<a class="govuk-link" href="{{ changeOutcomeURL }}">Change outcome</a>
		</div>
	</form>
{% endblock %}
