{% extends "../applications-create-layout.njk" %}

{% from "govuk/components/input/macro.njk" import govukInput %}

{% block beforeContent %}
	{{ govukBreadcrumbs({
		classes: 'govuk-!-margin-top-3',
		items: [
			{ text: 'Applications', href: 'dashboard'|url({domainType:domainType}) },
			{ text: 'Case information', href: 'applications-create'|url({applicationId: applicationId})},
			{ text: 'Applicant Information', href: 'applications-create'|url({applicationId: applicationId, step: 'applicant-organisation-name'})},
			{ text: 'Key dates'}
		]
	}) }}
{% endblock %}

{% block stepTitle %}
	What are the key dates of the case?
{% endblock %}


{% block stepForm %}
	{{ govukInput({
		label: {
			text: "Anticipated submission date published",
			classes: 'font-weight--700'
		},
		id: "keyDates.submissionDatePublished",
		name: "keyDates.submissionDatePublished",
		value: values['keyDates.submissionDatePublished'],
		errorMessage: errors['keyDates.submissionDatePublished'],
		classes: "govuk-!-width-one-third",
		hint: {
			text: "for example, Q4 2023"
		}
	}) }}

	<div class="govuk-form-group {{ 'govuk-form-group--error' if (errors['keyDates.submissionDateInternal'] !== undefined and errors['keyDates.submissionDateInternal'] !== false) else '' }}">
		<label class="govuk-label font-weight--700" for="submissionDateInternal">
			Anticipated submission date internal
		</label>
		<div id="applicationName-hint" class="govuk-hint">
			for example, 27 3 2023
		</div>
		{% if (errors['keyDates.submissionDateInternal'] !== undefined and errors['keyDates.submissionDateInternal'] !== false) %}
		<p id="submissionDateInternal-error" class="govuk-error-message">
			<span class="govuk-visually-hidden">Error:</span> {{ errors['keyDates.submissionDateInternal'].msg }}
		</p>
		{% endif %}
		<div class="govuk-grid-column-one-third">
			<div class="govuk-grid-row pins-date-form-group">
				{{ govukInput({
					id: "submissionInternalDay",
					name: "submissionInternalDay",
					value: values['keyDates.submissionDate'] |datestamp({format: 'dd'}),
					errorMessage: (errors['keyDates.submissionDateInternal'] !== undefined and errors['keyDates.submissionDateInternal'] !== false),
					hint: {
						text: "Day"
					}
				}) }}
				{{ govukInput({
					id: "submissionInternalMonth",
					name: "submissionInternalMonth",
					value: values['keyDates.submissionDate'] |datestamp({format: 'MM'}),
					errorMessage: (errors['keyDates.submissionDateInternal'] !== undefined and errors['keyDates.submissionDateInternal'] !== false),
					hint: {
						text: "Month"
					}
				}) }}
				{{ govukInput({
					id: "submissionInternalYear",
					name: "submissionInternalYear",
					value: values['keyDates.submissionDate'] |datestamp({format: 'yyyy'}),
					errorMessage: (errors['keyDates.submissionDateInternal'] !== undefined and errors['keyDates.submissionDateInternal'] !== false),
					hint: {
						text: "Year"
					}
				}) }}
			</div>
		</div>
	</div>


{% endblock %}

{% set backLink = 'applications-create'|url({applicationId:applicationId, step: backPath}) %}
