{% extends "../../layouts/applications.layout.njk" %}
{% from "govuk/components/breadcrumbs/macro.njk" import govukBreadcrumbs %}
{% from "govuk/components/details/macro.njk" import govukDetails %}
{% from "govuk/components/tabs/macro.njk" import govukTabs %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "./tab-details.component.njk" import documentationDetailsTab %}
{% from "./tab-history.component.njk" import documentationHistoryTab %}

{% block beforeContent %}
    {{ govukBackLink({
		text: "Back",
		href: breadcrumbItems[breadcrumbItems.length - 1].href
	}) }}
{% endblock %}
{% block pageHeading %}{% endblock %}
{% block pageContent %}
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-full govuk-!-margin-top-0">
            {% block sectionContent %}
                {{ govukBreadcrumbs({
					classes: 'govuk-!-margin-top-0',
					items: breadcrumbItems
				}) }}
                <h1 class="govuk-heading-xl govuk-!-margin-top-4">
                    <span class="govuk-caption-xl">Document properties</span>
                    {{ documentationFile.fileName }}
                </h1>
                <ul class="govuk-list">
                    <li class="govuk-!-margin-top-4"><strong>Description:</strong> {{ documentationFile.description }}</li>
                    <li class="govuk-!-margin-top-4"><strong>Case reference:</strong> {{ case.reference }}</li>
                    <li class="govuk-!-margin-top-4"><strong>Document reference number:</strong></li>
                    <li class="govuk-!-margin-top-4"><strong>File type and size:</strong>
                        {{ documentationFile.mime|fileType }},
                        {{ documentationFile.size|fileSize }}
                    </li>
					<li class="govuk-!-margin-top-4"><strong>Version:</strong> {{ documentationFile.version }}</li>
                </ul>
                <div class="display--flex govuk-!-margin-top-7 govuk-!-margin-bottom-7">
                    <a class="govuk-button govuk-!-margin-0" href="{{ 'document'|url({caseId: caseId, folderId: folderId, documentGuid: documentationFile.documentGuid, step: 'new-version'}) }}">
                        Upload new version
                    </a>
                </div>
                <nav>
					<h4 class="govuk-heading-m govuk-!-margin-bottom-4">Document actions</h4>
                    <a class="govuk-button govuk-button--secondary govuk-!-margin-0" href="/open">Open</a>
					<a class="govuk-button govuk-button--secondary govuk-!-margin-0 govuk-!-margin-left-2" href="{{ 'document-download'|url({caseId: caseId, documentGuid: documentationFile.documentGuid, version: documentationFile.version}) }}">Download</a>
                    <a class="govuk-button govuk-button--secondary govuk-!-margin-0 govuk-!-margin-left-2" href="/move">Move</a>
                    <a class="govuk-button govuk-button--secondary govuk-!-margin-0 govuk-!-margin-left-2" href="{{ 'document'|url({caseId: caseId, folderId: folderId, documentGuid: documentationFile.documentGuid, step: 'delete'}) }}">Delete</a>
                </nav>
                <div class="govuk-!-margin-top-7">
                    {{ govukTabs({
						items: [
							{
								label: "Document properties",
								id: "document-properties",
								panel: { html: documentationDetailsTab(documentationFile, caseId, folderId)}
							},
							{
								label: "Document history",
								id: "document-history",
								panel: {html: documentationHistoryTab(documentVersions, caseId)}
							}
						]
					}) }}
                </div>
            {% endblock %}
        </div>
    </div>
{% endblock %}
