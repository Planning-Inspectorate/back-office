{% extends "app/layouts/app.layout.njk" %}

{% from "../components/applications-case-menu.component.njk" import applicationsCaseMenu %}
{% from "govuk/components/accordion/macro.njk" import govukAccordion %}
{% from "govuk/components/breadcrumbs/macro.njk" import govukBreadcrumbs %}
{% from "../../components/status-tag.component.njk" import statusTag %}
{% from '../../components/applications-header.njk' import applicationsHeader %}


{% set pageCaption = displayValue %}
{% set pageTitle = application.title %}

{% block beforeContent %}
	{{ govukBackLink({
		text: "Back to applications",
		href: '/applications-service/' + domainType
	}) }}
{% endblock %}

{% block header %}
	{{ applicationsHeader(domainType) }}
{% endblock %}

{% block pageHeading %}
	<div class="govuk-grid-row govuk-!-padding-top-9 govuk-!-padding-bottom-2 govuk-!-margin-bottom-7 pins-masthead-summary">
		<div class="govuk-grid-column-full">
			<h4 class="govuk-heading-m"> {{ application.reference }} </h4>
			<h1 class="govuk-heading-xl">
				{% if pageCaption %}
					<span class="govuk-caption-xl">{{ pageCaption }}</span>
				{% endif %}{{ pageHeading or pageTitle }}
			</h1>

			{% block pageHeadingData %}
				<div class="govuk-grid-row">
					<div class="govuk-grid-column-full govuk-body">
						{{ application.sector.displayNameEn }}, {{ application.subSector.displayNameEn }}
						<br><br>
						{{ statusTag(application.status) }}
					</div>
				</div>
			{% endblock %}
		</div>
	</div>
{% endblock %}

{% block pageContent %}
	<div class="govuk-grid-row">
		{% block sectionMenu %}
			<div class="govuk-grid-column-one-third">
				{{ applicationsCaseMenu({ application: application, domainType: domainType, selectedPageType: selectedPageType }) }}
			</div>
		{% endblock %}
		<div class="govuk-grid-column-two-thirds">
			{% block sectionContent %}
			{% endblock %}
		</div>
	</div>
{% endblock %}

