{% extends "../layouts/applications.layout.njk" %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "./components/case-info-table.component.njk" import caseInfoTable %}
{% from "./components/case-details-table.component.njk" import caseDetailsTable %}
{% from "./components/case-applicant-table.component.njk" import caseApplicantTable %}

{% set pageTitle = case.title %}
{% set serviceName = 'Preview and publish project' %}
{% set isPublishPage = 1 %}

{% block pageHeading %}
{% endblock %}

{% block beforeContent %}
	{{ govukBackLink({
		text: "Back",
		href: 'case-view'|url({caseId: case.id, step: 'project-information'})
	}) }}
{% endblock %}

{% block pageContent %}
	<div class="govuk-grid-row" id="pins-publish-case">
		<form class="govuk-grid-column-two-thirds" method="post" action="">
			{% block sectionContent %}
				<h1 class="govuk-heading-l">{{ serviceName }}</h1>

				{{ caseInfoTable(case) }}
				<h2 class="govuk-heading-m govuk-!-margin-top-9 govuk-!-margin-bottom-2">Project details</h2>
				<p class="govuk-body govuk-!-margin-bottom-5">Check details before publishing</p>
				{{ caseDetailsTable(case, domainType, isPublishPage) }}

				<h2 class="govuk-heading-m govuk-!-margin-top-9 govuk-!-margin-bottom-2">Applicant information</h2>
				<p class="govuk-body govuk-!-margin-bottom-5">Check details before publishing</p>
				{{ caseApplicantTable(case, domainType, isPublishPage) }}
			{% endblock %}


			{{ govukButton({ classes: 'govuk-!-margin-top-5', text: 'Accept and publish changes' if case.published else 'Accept and publish project' }) }}
		</form>
	</div>
{% endblock %}
