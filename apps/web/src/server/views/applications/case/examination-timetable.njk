{% extends "./layouts/applications-case-layout.njk" %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/accordion/macro.njk" import govukAccordion %}
{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}

{% block sectionContent %}
    <div>
		<div class='govuk-grid-row'>
			<div class='govuk-grid-column-two-thirds'>
				<h2 class="govuk-heading-l">Examination timetable</h2>
			</div>
			<div class='govuk-grid-column-one-third'>
				<strong class="govuk-tag govuk-tag--grey">UNPUBLISHED</strong>
			</div>
		</div>

		<p class="govuk-body">Create or manage an examination timetable</p>

		<a class='govuk-button govuk-!-margin-top-5' href="{{'timetable'|url({caseId: caseId, step: 'new-item'})}}">Create new item</a>
	</div>

	<hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

	<div>
        <h3 class="govuk-heading-m">Pre-Examination</h3>
		{% set accordionItems = [] %}
		{% for timetableItem in timetableItems %}
			{% set tableRows = [{
					key: { text: "Date" },
					value: { text: timetableItem.date }
				}, {
					key: { text: "Name" },
					value: { text: timetableItem.name }
				}, {
					key: { text: "Description" },
					value: { text: timetableItem.description }
				}, {
					key: { text: "Start Time" },
					value: { text: timetableItem.startTime }
				}]
			%}
			{% set row = {
				heading: { text: timetableItem.name },
				content: { html: govukSummaryList({ rows: tableRows }) }
			} %}
			{% set accordionItems = accordionItems.concat([row]) %}
		{% endfor %}
		{{ govukAccordion({
			id: "accordion-default",
			items: accordionItems
		}) }}
	</div>

	<div>
        <h3 class="govuk-heading-m">Examination</h3>
		{{ govukAccordion({
			id: "accordion-default",
			items: accordionItems
		}) }}
    </div>

{% endblock %}
