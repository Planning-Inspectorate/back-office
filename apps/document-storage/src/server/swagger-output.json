{
	"swagger": "2.0",
	"info": {
		"version": "2.0",
		"title": "Document Storage API",
		"description": "Document Storage API documentation"
	},
	"host": "localhost:3001",
	"basePath": "",
	"tags": [
		{
			"name": "",
			"description": ""
		}
	],
	"schemes": [],
	"securityDefinitions": {},
	"paths": {
		"/": {
			"get": {
				"description": "Lists all documents assigned to appeal/application",
				"parameters": [
					{
						"name": "id",
						"in": "query",
						"description": "Appeal or application ID",
						"required": true,
						"type": "integer"
					},
					{
						"name": "type",
						"in": "query",
						"description": "Specifies if appeal or application",
						"required": true,
						"type": "string",
						"schema": {
							"type": "string",
							"enum": ["appeal", "application"]
						}
					}
				],
				"responses": {
					"200": {
						"description": "List of documents associated with appeal/application and their metadata",
						"schema": {
							"$ref": "#/definitions/Documents"
						}
					}
				}
			},
			"post": {
				"description": "Uploads new document",
				"parameters": [
					{
						"name": "file",
						"in": "formData",
						"type": "file",
						"required": true,
						"description": "File to upload"
					},
					{
						"name": "documentType",
						"in": "formData",
						"type": "string",
						"required": true,
						"description": "Type of document which will be saved as metadata"
					},
					{
						"name": "type",
						"in": "formData",
						"description": "Specifies if appeal or application",
						"required": true,
						"type": "string",
						"schema": {
							"type": "string",
							"enum": ["appeal", "application"]
						}
					},
					{
						"name": "id",
						"in": "formData",
						"description": "Appeal or application ID",
						"required": true,
						"type": "integer"
					}
				],
				"responses": {}
			}
		},
		"/document": {
			"get": {
				"description": "Gets content of file",
				"parameters": [
					{
						"name": "documentName",
						"in": "query",
						"description": "Full document name including path",
						"required": true,
						"type": "string"
					}
				],
				"responses": {
					"200": {
						"description": "File content"
					}
				}
			},
			"delete": {
				"tags": ["Document-Storage"],
				"description": "Deletes document",
				"parameters": [
					{
						"name": "body",
						"in": "body",
						"required": true,
						"schema": {
							"type": "object",
							"properties": {
								"documentPath": {
									"type": "string",
									"example": "some/doc/path/test.txt"
								}
							}
						},
						"description": "Document path in the container"
					}
				],
				"responses": {
					"200": {
						"description": "All ok response"
					}
				}
			}
		},
		"/document-location": {
			"post": {
				"tags": ["Document-Storage"],
				"description": "Creates doc url",
				"parameters": [
					{
						"name": "body",
						"in": "body",
						"required": true,
						"schema": {
							"$ref": "#/definitions/createBlobUrl"
						},
						"description": "Array of objects containing information about documents to return formatted url"
					}
				],
				"responses": {
					"200": {
						"description": "ID of application",
						"schema": {
							"$ref": "#/definitions/createBlobUrlResponse"
						}
					}
				}
			}
		}
	},
	"definitions": {
		"createBlobUrl": {
			"type": "array",
			"items": {
				"type": "object",
				"properties": {
					"caseType": {
						"type": "string",
						"example": "application"
					},
					"caseReference": {
						"type": "string",
						"example": "1"
					},
					"documentName": {
						"type": "string",
						"example": "PINS1"
					},
					"GUID": {
						"type": "string",
						"example": "D987654321"
					}
				}
			}
		},
		"Documents": {
			"type": "array",
			"items": {
				"type": "object",
				"properties": {
					"name": {
						"type": "string",
						"example": "filename.pdf"
					},
					"metadata": {
						"type": "object",
						"properties": {
							"documentType": {
								"type": "string",
								"example": "application"
							}
						}
					}
				}
			}
		},
		"createBlobUrlResponse": {
			"type": "object",
			"properties": {
				"blobStorageHost": {
					"type": "string",
					"example": "Blob-Storage-Host"
				},
				"blobStorageContainer": {
					"type": "string",
					"example": "Blob-Storage-Container"
				},
				"documents": {
					"type": "array",
					"items": {
						"type": "object",
						"properties": {
							"blobStoreUrl": {
								"type": "string",
								"example": "/some/path/to/document/PINS1"
							},
							"caseType": {
								"type": "string",
								"example": "application"
							},
							"caseReference": {
								"type": "string",
								"example": "1"
							},
							"documentName": {
								"type": "string",
								"example": "PINS1"
							},
							"GUID": {
								"type": "string",
								"example": "D987654321"
							}
						}
					}
				}
			}
		}
	}
}
